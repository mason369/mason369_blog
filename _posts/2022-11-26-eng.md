---
title: 什么是前端工程化
tags: [前端, 工程化]
style: secondary
color: dark
comments: true
description: 由于现在开发中，前端可以负责的范围越来越大，早已不是仅限制于网页。像 App、小程序、甚至桌面应用，都可以使用前端技术来开发。所以原来通过前端写 Demo，后端套数据的模式早就无法支持现代多元化前端开发。前端工程化就是在这个背景下成为了受人重视的技术，并且是目前前端开发必备的技术之一。
---  

## 前端工程化概述

### 前端工程化定义和主要解决的问题
由于现在开发中，前端可以负责的范围越来越大，早已不是仅限制于网页。像 App、小程序、甚至桌面应用，都可以使用前端技术来开发。  

所以原来通过前端写 Demo，后端套数据的模式早就无法支持现代多元化前端开发。  

前端工程化就是在这个背景下成为了受人重视的技术，并且是目前前端开发必备的技术之一。  

技术是为了解决问题而存在的，前端工程化解决了很多问题。比如 ES6 新语法、Less/Sass/PostCss 等 CSS 工具和模块化。它们都是无法被运行环境直接支持的。但是使用前端工程化以后，就可以将它们转换为运行环境支持的代码。

还有一些部署项目时所需要做的操作，比如压缩代码及资源文件，将代码上传至服务器等。如果让人来手动处理这些任务，会很容易出现操作失误。这种情况下，让机器自动来完成这些任务更为合理。  

多人协作时，代码风格、代码质量都需要得到保证。  

开发过程中需要等待后端接口提前完成。  

这些都是前端工程化负责的范畴。  

总结起来，前端工程化解决的问题主要有 6 个部分。  

* 传统语言或语法的弊端。（ES6+语法、TypeScript、Sass）
* 无法使用模块化/组件化（ES Modules、Components）
* 重复的机械式工作（Build、Publish）
* 代码风格统一、质量保证（git、ESLint）
* 依赖后端服务接口支持（Mock）
* 整体依赖后端项目（DevServer）

## 工程化表现
一切以提高效率、降低成本、质量保证为目的的手段都属于工程化。
一切重复的工作都应该被自动化。
一个常规前端项目的整体环节大约有 5 步：
创建项目-编码-预览/测试-提交-部署
1. 创建项目阶段：  
借助脚手架工具自动创建项目目录结构和特定类型的文件。

2. 编码阶段：  
借助工具实现代码格式化、校验代码风格，还可以使用新的特性来编写源代码，通过编译/构建/打包生成运行环境支持的运行时代码。

3. 预览/测试阶段  
开发过程，需要 Mock 服务，需要使用基础的 Web 服务器来托管项目，比如 Nginx、Apatch 等。但这些服务都不提供热更新的体验，所以需要借助现代化的工具来提高开发体验。  
在编译转换后，如果发生异常，需要定位源代码的位置。这是就需要使用 Source Map 技术来映射运行代码和源代码。

4. 代码提交阶段  
使用 git hooks 对项目整体进行检查，包括代码风格的检查和项目质量的检查，确保不会将有问题的代码提交到 git 仓库中，这样 git 仓库的代码永远都是可用的。除此以外，还可以对 git log 的格式进行限制，这样在代码分支合并和回滚时有很大的价值。  
主要借助的工具有 Lint-staged 和持续集成等。

5. 部署阶段  
CI/CD、自动发布。  
可以通过一行命令自动的将项目打包上传至 ftp 服务器。

##  工程化不等于工具
现在有些工具非常强大，像 Webpack，以至于很多人认为前端工程化就是指 webpack。  

实际上，工具不是工程化的核心，工程化的核心是对项目的整体规划和架构。工具只是实现这种规划和架构的一种手段。
一个项目的工程化，首先要规划出一个项目整体的工作流架构。  

如文件组织结构（按作用分层、按业务分层）、代码开发范式（语法、规范、标准、语言，如 ES6+、TypeScript 等）、前后端分离方式（Ajax 和中间层）。  

规划完工作流整体架构以后，再来考虑使用哪些工具来实现这套规划。  

可以借鉴目前业界成熟的工程化方案中的思路，如 create-react-app、vue-cli、angluar-cli、gatsby-cli 等。
它们并不是一个简单的项目生成脚手架，而是工程化工具的集成。  

## 工程化与 Node.js  

目前前端的工程化很大程度上都归功于 Node.js。  

Node.js 是继 Ajax 后有一次颠覆式的前端工业革命，没有 Node.js 就没有今天的前端。

目前绝大多数工程化工具都是由 Node.js 开发的，所以前端工程化是由 Node.js 强力驱动的。  

总之，工程化是为了解决问题而存在的。  

## 脚手架工具 
### 概要
脚手架工具是前端工程化的发起者，它是自动帮助我们创建项目基础结构、提供项目规范和约定的工具。

在开发相同类型的项目时，会有很多相同的东西，包括：

组织结构

开发范式

模块依赖

工具配置

基础代码

...

这些相同的东西不需要人为创建，可以使用脚手架工具快速创建项目骨架。然后基于这个骨架来开发。

比如使用大型的 IDE，如 IDEA 和 Visual Studio 等来创建项目的过程就是一个脚手架的工作流程。

前端的脚手架和服务端项目、移动端项目不太一样。因为技术选型过于多样化，所以不会集中在某一个特定的 IDE 中，目前流行的做法是在命令行中来完成项目的创建。

## 常用的脚手架工具
React 项目： create-react-app

Vue 项目： vue-cli

Angular 项目： angular-cli

它们根据用户选择的信息创建对应的项目基础结构，不过它们只能服务于本身的框架，并不通用。

另一类是通用型脚手架工具，代表像 Yeoman。优点是灵活易扩展。

还有一类是在项目开发过程中会使用到的，比如 Plop。它可以创建某种特定类型的文件。比如某个模块或是某个组件的基础代码。
