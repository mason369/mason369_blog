---
title: å®è·µï¼šESLintåœ¨Vueé¡¹ç›®ä¸­çš„ä½¿ç”¨
tags: [Eslint, è§„èŒƒ]
style: fill
color: info
comments: true
description: ESLintæ˜¯ä¸€ä¸ªé›†ä»£ç å®¡æŸ¥å’Œä¿®å¤çš„å·¥å…·ï¼Œå®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡é…ç½®ä¸€ä¸ªä¸ªè§„åˆ™æ¥é™åˆ¶ä»£ç çš„åˆæ³•æ€§å’Œé£æ ¼
---

## ä¸€ã€ä»€ä¹ˆæ˜¯ ESlintã€æœ‰ä»€ä¹ˆç‰¹æ€§

### æè¿°ï¼š

ESLint æ˜¯ä¸€ä¸ªé›†ä»£ç å®¡æŸ¥å’Œä¿®å¤çš„å·¥å…·ï¼Œå®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡é…ç½®ä¸€ä¸ªä¸ªè§„åˆ™æ¥é™åˆ¶ä»£ç çš„åˆæ³•æ€§å’Œé£æ ¼

### ç‰¹æ€§ï¼š

1. å‘ç°é—®é¢˜ï¼š ESLint é™æ€åˆ†æä»£ç ä»¥å¿«é€Ÿå‘ç°é—®é¢˜ã€‚ESLint å†…ç½®äºå¤§å¤šæ•°æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œæ‚¨å¯ä»¥å°† ESLint ä½œä¸ºæŒç»­é›†æˆç®¡é“çš„ä¸€éƒ¨åˆ†è¿è¡Œ
2. è‡ªåŠ¨ä¿®å¤ï¼š ESLint å‘ç°çš„è®¸å¤šé—®é¢˜å¯ä»¥è‡ªåŠ¨ä¿®å¤ã€‚ESLint ä¿®å¤ç¨‹åºå…·æœ‰è¯­æ³•æ„è¯†ï¼Œå› æ­¤æ‚¨ä¸ä¼šé‡åˆ°ä¼ ç»ŸæŸ¥æ‰¾å’Œæ›¿æ¢ç®—æ³•å¼•å…¥çš„é”™è¯¯
3. å®šåˆ¶ï¼š é¢„å¤„ç†ä»£ç ï¼Œä½¿ç”¨è‡ªå®šä¹‰è§£æå™¨ï¼Œå¹¶ç¼–å†™ä¸ ESLint å†…ç½®è§„åˆ™ä¸€èµ·ä½¿ç”¨çš„è‡ªå·±çš„è§„åˆ™ã€‚æ‚¨å¯ä»¥è‡ªå®šä¹‰ ESLintï¼Œä½¿å…¶å®Œå…¨æŒ‰ç…§é¡¹ç›®æ‰€éœ€çš„æ–¹å¼å·¥ä½œ

## äºŒã€ESlint ä½¿ç”¨åŠé…ç½®

### åŸºæœ¬ä½¿ç”¨ï¼š

å®‰è£…

```javascript
npm install eslint --save-dev
```

åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼Œæ ¹ç›®å½•ç”Ÿæˆ.eslintrc.js

```javascript
npx eslint --init
```

## ä¸¤ç§é…ç½®æ–¹å¼ï¼š

- é…ç½®æ³¨é‡Šï¼šä½¿ç”¨ JavaScript æ³¨é‡ŠæŠŠé…ç½®ä¿¡æ¯ç›´æ¥åµŒå…¥åˆ°ä¸€ä¸ªä»£ç æºæ–‡ä»¶ä¸­
- é…ç½®æ–‡ä»¶ï¼š1. ä½¿ç”¨ JavaScriptã€JSON æˆ–è€… YAML æ–‡ä»¶ä¸ºæ•´ä¸ªç›®å½•ï¼ˆå¤„ç†ä½ çš„ä¸»ç›®å½•ï¼‰å’Œå®ƒçš„å­ç›®å½•æŒ‡å®šé…ç½®ä¿¡æ¯ã€‚å¯ä»¥é…ç½®ä¸€ä¸ªç‹¬ç«‹çš„ Â .eslintrc.\*Â  æ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥åœ¨ Â package.jsonÂ  æ–‡ä»¶é‡Œçš„ Â eslintConfigÂ  å­—æ®µæŒ‡å®šé…ç½®ï¼ŒESLint ä¼šæŸ¥æ‰¾å’Œè‡ªåŠ¨è¯»å–å®ƒä»¬ï¼Œå†è€…ï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œè¿è¡Œæ—¶æŒ‡å®šä¸€ä¸ªä»»æ„çš„é…ç½®æ–‡ä»¶ã€‚

## å…·ä½“é…ç½®å­—æ®µï¼š

1. parser è§£æå™¨åŠè§£æå‚æ•°

è§£æå™¨å°†æºä»£ç è½¬æ¢ä¸ºç§°ä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰çš„æ•°æ®æ ¼å¼ï¼Œç„¶åï¼Œæ’ä»¶ä½¿ç”¨è¿™ç§æ•°æ®æ ¼å¼å›´ç»•ä»£ç çš„å¤–è§‚æˆ–è¡Œä¸ºåˆ›å»ºç§°ä¸º lint è§„åˆ™çš„æ–­è¨€ã€‚

ESLint é™„å¸¦äº†ä¸€ä¸ªå†…ç½®çš„è§£æå™¨ï¼ˆç§°ä¸º espreeï¼‰ï¼Œå› æ­¤å¦‚æœä½ åªç¼–å†™æ ‡å‡† JavaScriptï¼Œå°±ä¸éœ€è¦è‡ªå®šä¹‰è§£æå™¨äº†

å¦‚æœæˆ‘ä»¬æƒ³æ”¯æŒéæ ‡å‡† JavaScript è¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ä¸º ESLint æä¾›ä¸€ä¸ªå¯ä¾›ä½¿ç”¨çš„æ›¿ä»£è§£æå™¨ã€‚æ ¹æ®å·¥ç¨‹çš„å®é™…æƒ…å†µï¼Œå¯¹è§£æå™¨è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚åŸºäº vue æ¡†æ¶çš„å·¥ç¨‹éœ€è¦ç”¨åˆ°èƒ½è§£æ vue è¯­æ³•è§£æå™¨ï¼›å†æ¯”å¦‚ä½¿ç”¨åˆ° TypeScript çš„å·¥ç¨‹ï¼Œéœ€è¦é…ç½®èƒ½è§£æ TypeScript çš„è§£æå™¨

> è¿™é‡Œå¯ä»¥ç±»æ¯” webpackï¼Œè‡ªèº«åªèƒ½å¤„ç† jsã€åŠ json æ–‡ä»¶ï¼Œcssã€html ç­‰æ–‡ä»¶éœ€è¦é€šè¿‡è‡ªå®šä¹‰ loader å¤„ç†æ¥ç†è§£

å¸¸ç”¨è§£æå™¨ï¼š

- @babel/eslint-parserï¼šä¸€ä¸ªå¯¹ Babel è§£æå™¨çš„åŒ…è£…ï¼Œä½¿å…¶èƒ½å¤Ÿä¸ ESLint å…¼å®¹
- @typescript-eslint/parserï¼šTSLint è¢«å¼ƒç”¨åï¼Œå°† TypeScript è½¬æ¢æˆä¸ estree å…¼å®¹çš„å½¢å¼ï¼Œä»¥ä¾¿åœ¨ ESLint ä¸­ä½¿ç”¨

è§£æå‚æ•° parserOptionï¼š

```javascript
{
    // è§£æå™¨ï¼Œé»˜è®¤espree
    parser: "espree",
    parserOption: {
        // æŒ‡å®šè¦ä½¿ç”¨çš„ECMAScriptç‰ˆæœ¬ï¼Œé»˜è®¤å€¼5ï¼Œå¯ä»¥ä½¿ç”¨ 6ã€7ã€8ã€9 æˆ– 10 æ¥æŒ‡å®šä½ æƒ³è¦ä½¿ç”¨çš„ ECMAScript ç‰ˆæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨ä½¿ç”¨å¹´ä»½å‘½åçš„ç‰ˆæœ¬å·æŒ‡å®šä¸º 2015ï¼ˆåŒ 6ï¼‰ï¼Œ2016ï¼ˆåŒ 7ï¼‰ï¼Œæˆ– 2017ï¼ˆåŒ 8ï¼‰æˆ– 2018ï¼ˆåŒ 9ï¼‰æˆ– 2019 (same as 10)
        ecmaVersion: 5,
        // è®¾ç½®ä¸ºÂ "script"Â (é»˜è®¤) æˆ–Â "module"ï¼ˆå¦‚æœä½ çš„ä»£ç æ˜¯ ECMAScript æ¨¡å—)
        sourceType: "module",
        // è¿™æ˜¯ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºä½ æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§ï¼Œæ‰€æœ‰é€‰é¡¹é»˜è®¤éƒ½æ˜¯ false
        ecmafeatures: {
            // æ˜¯å¦å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥
            globalReturn: false,
            // æ˜¯å¦å¯ç”¨å…¨å±€ strict æ¨¡å¼ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
            impliedStrict: false,
            // æ˜¯å¦å¯ç”¨JSXï¼Œæ”¯æŒ JSX è¯­æ³•å¹¶ä¸ç­‰åŒäºæ”¯æŒ Reactã€‚React å¯¹ ESLint æ— æ³•è¯†åˆ«çš„JSXè¯­æ³•åº”ç”¨ç‰¹å®šçš„è¯­ä¹‰ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ React å¹¶ä¸”æƒ³è¦ React è¯­ä¹‰æ”¯æŒï¼Œæˆ‘ä»¬å»ºè®®ä½ ä½¿ç”¨Â [eslint-plugin-react](https://github.com/yannickcr/eslint-plugin-react)ã€‚
            jsx: false,
            // æ˜¯å¦å¯ç”¨å¯¹å®éªŒæ€§çš„objectRest/spreadPropertiesçš„æ”¯æŒ
            experimentalObjectRestSpread: false
        }
    },
}
```

## 2. env ç¯å¢ƒ

ä¸€ä¸ªç¯å¢ƒå®šä¹‰äº†ä¸€ç»„é¢„å®šä¹‰çš„å…¨å±€å˜é‡

æŒ‡å®šä¸åŒçš„ç¯å¢ƒå¯ä»¥ç»™å¯¹åº”ç¯å¢ƒä¸‹æä¾›é¢„è®¾çš„å…¨å±€å˜é‡ï¼Œæ¯”å¦‚è¯´åœ¨ browser ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ window å…¨å±€å˜é‡ï¼›åœ¨ node ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ process å…¨å±€å˜é‡ç­‰ã€‚
å¯ç”¨çš„ç¯å¢ƒåŒ…æ‹¬ï¼š
å¯é€‰é…ç½®é¡¹å¦‚ä¸‹ï¼š

- browserÂ - æµè§ˆå™¨ç¯å¢ƒä¸­çš„å…¨å±€å˜é‡ã€‚
- nodeÂ - Node.js å…¨å±€å˜é‡å’Œ Node.js ä½œç”¨åŸŸã€‚
- commonjsÂ - CommonJS å…¨å±€å˜é‡å’Œ CommonJS ä½œç”¨åŸŸ (ç”¨äº Browserify/WebPack æ‰“åŒ…çš„åªåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ä»£ç )ã€‚
- shared-node-browserÂ - Node.js å’Œ Browser é€šç”¨å…¨å±€å˜é‡ã€‚
- es6Â - å¯ç”¨é™¤äº† modules ä»¥å¤–çš„æ‰€æœ‰ ECMAScript 6 ç‰¹æ€§ï¼ˆè¯¥é€‰é¡¹ä¼šè‡ªåŠ¨è®¾ç½® Â ecmaVersionÂ  è§£æå™¨é€‰é¡¹ä¸º 6ï¼‰ã€‚
- æ›´å¤šå¯è§[å®˜ç½‘](https://eslint.bootcss.com/docs/user-guide/configuring#specifying-environments)

è¿™äº›ç¯å¢ƒå¹¶ä¸æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶å®šä¹‰å¤šä¸ªã€‚å¯ä»¥åœ¨æºæ–‡ä»¶é‡Œã€åœ¨é…ç½®æ–‡ä»¶ä¸­æˆ–ä½¿ç”¨ Â  å‘½ä»¤è¡Œ Â  çš„ Â --envÂ  é€‰é¡¹æ¥æŒ‡å®šç¯å¢ƒã€‚

> è¿™äº›ç¯å¢ƒå¹¶ä¸æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶å®šä¹‰å¤šä¸ªã€‚å¯ä»¥åœ¨æºæ–‡ä»¶é‡Œã€åœ¨é…ç½®æ–‡ä»¶ä¸­æˆ–ä½¿ç”¨ å‘½ä»¤è¡Œ çš„ --env é€‰é¡¹æ¥æŒ‡å®šç¯å¢ƒã€‚

## 3. globals å…¨å±€å˜é‡

è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´è®¿é—®çš„é¢å¤–çš„å…¨å±€å˜é‡

> å½“è®¿é—®å½“å‰æºæ–‡ä»¶å†…æœªå®šä¹‰çš„å˜é‡æ—¶ï¼Œno-undef è§„åˆ™å°†å‘å‡ºè­¦å‘Šã€‚å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªæºæ–‡ä»¶é‡Œä½¿ç”¨å…¨å±€å˜é‡ï¼Œåœ¨ Globals ä¸­å®šä¹‰è¿™äº›å…¨å±€å˜é‡ï¼Œè¿™æ · ESLint å°±ä¸ä¼šå‘å‡ºè­¦å‘Šäº†

```javascript
"globals": {
        "var1": "writable", // "off"Â ç¦ç”¨å…¨å±€å˜é‡
        "var2": "readonly"
    }
```

## 4. rules è§„åˆ™

å¯ç”¨çš„è§„åˆ™åŠå…¶å„è‡ªçš„é”™è¯¯çº§åˆ«ï¼Œé…ç½®æ–‡ä»¶

ESLint é™„å¸¦æœ‰å¤§é‡çš„è§„åˆ™ï¼Œè¦æ”¹å˜ä¸€ä¸ªè§„åˆ™è®¾ç½®ï¼Œä½ å¿…é¡»å°†è§„åˆ™ ID è®¾ç½®ä¸ºä¸‹åˆ—å€¼ä¹‹ä¸€ï¼š

- "off"Â  æˆ– Â 0Â - å…³é—­è§„åˆ™
- "warn"Â  æˆ– Â 1Â - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarnÂ (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)
- "error"Â  æˆ– Â 2Â - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerrorÂ (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)

```json
"rules": {
        "eqeqeq": "off", // è¦æ±‚ä½¿ç”¨Â `===`Â å’ŒÂ `!==`
        "curly": "error", // å¼ºåˆ¶æ‰€æœ‰æ§åˆ¶è¯­å¥ä½¿ç”¨ä¸€è‡´çš„æ‹¬å·é£æ ¼
        "quotes": ["error", "double"] // å¼•å·
    }
```

## 5. extends é…ç½®æ‰©å±•

å®é™…é¡¹ç›®ä¸­é…ç½® rules çš„æ—¶å€™ï¼Œä¸å¯èƒ½å›¢é˜Ÿä¸€æ¡ä¸€æ¡çš„å»å•†è®®é…ç½®ï¼Œå¤ªè´¹ç²¾åŠ›äº†ã€‚é€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨ä¸šå†…å¤§å®¶æ™®é€šä½¿ç”¨çš„ã€éµå¾ªçš„ç¼–ç è§„èŒƒï¼›ç„¶åé€šè¿‡ extends å»å¼•å…¥è¿™äº›è§„èŒƒã€‚extends é…ç½®çš„æ—¶å€™æ¥å—å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼š

- æŒ‡å®šé…ç½®çš„å­—ç¬¦ä¸²(é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€å¯å…±äº«é…ç½®çš„åç§°ã€eslint:recommendedÂ  æˆ– Â eslint:all)
- å­—ç¬¦ä¸²æ•°ç»„ï¼šæ¯ä¸ªé…ç½®ç»§æ‰¿å®ƒå‰é¢çš„é…ç½®

> extends å¯ä»¥ç†è§£ä¸º rules çš„å¿«æ·é…ç½®å­—æ®µï¼Œä¸€èˆ¬å…ˆé…ç½® extends ä¸ºä¸šå†…é€šç”¨è§„èŒƒï¼Œä¸”æ•°ç»„æ—¶åé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œå¹¶è‡ªå®šä¹‰é…ç½® rules è¦†ç›– extends ä¸­ä¸æ»¡è¶³ä½ æƒ³è¦è§„èŒƒçš„è§„åˆ™

```json
{
	"extends": [
		"eslint:recommended",
		"plugin:vue/essential", // å®é™…npmåŒ…æ’ä»¶eslint-config-vue/essential [æ’ä»¶å:é…ç½®å]
		"airbnb-base", // å®é™…npmåŒ…æ’ä»¶eslint-config-vue/airbnb-base
		"@vue/prettier",
		"./node_modules/coding-standard/.eslintrc-es6"
	]
}
```

ä»ä¸Šé¢çš„é…ç½®ï¼Œå¯ä»¥çŸ¥é“ extends æ”¯æŒçš„é…ç½®ç±»å‹å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§

- eslint å¼€å¤´çš„ï¼šæ˜¯ ESLint å®˜æ–¹çš„æ‰©å±•ï¼›å¸¸è§é…ç½® eslint:recommendedã€eslint:all
- plugin å¼€å¤´çš„ï¼šæ˜¯æ’ä»¶ç±»å‹æ‰©å±•ï¼Œå¯ä»¥çœç•¥åŒ…åçš„å‰ç¼€ Â eslint-plugin-ï¼Œæ¯”å¦‚ plugin:vue/essentialï¼Œå®é™…ä¸Šä½¿ç”¨çš„æ˜¯ eslint-config-vue æ’ä»¶ï¼Œè€Œ essential æ˜¯é…ç½®åï¼Œå¯è§[æ’ä»¶é…ç½®è¯´æ˜](https://eslint.bootcss.com/docs/developer-guide/working-with-plugins#configs-in-plugins)

* eslint-config å¼€å¤´çš„ï¼šæ¥è‡ª npm åŒ…ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥å‰ç¼€ eslint-config-ï¼Œæ¯”å¦‚ä¸Šé¢çš„ç›´æ¥å†™æˆ airbnb-baseï¼›
* @å¼€å¤´çš„ï¼šæ‰©å±•å’Œ eslint-config ä¸€æ ·ï¼Œåªæ˜¯åœ¨ npm åŒ…ä¸Šé¢åŠ äº†ä¸€å±‚ä½œç”¨åŸŸ scopeï¼›
  ä¸€ä¸ªæ‰§è¡Œé…ç½®æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼›

å¸¸ç”¨ extends é…ç½®ï¼š

- eslint:recommendedï¼šESLint å†…ç½®çš„æ¨èè§„åˆ™ï¼Œå±æ€§å¯ç”¨ä¸€ç³»åˆ—æ ¸å¿ƒè§„åˆ™ï¼Œè¿™äº›è§„åˆ™æŠ¥å‘Šä¸€äº›å¸¸è§é—®é¢˜ï¼Œåœ¨ Â [è§„åˆ™é¡µé¢](https://eslint.bootcss.com/docs/rules/)Â  ä¸­è¢«æ ‡è®°ä¸º âœ…
- eslint:allï¼šESLint å†…ç½®çš„æ‰€æœ‰è§„åˆ™ï¼›
- eslint-config-airbnb-baseï¼šairbnb çš„ JS è§„èŒƒï¼›
- eslint-config-standardï¼šstandard çš„ JS è§„èŒƒï¼›

## 6. plugins æ’ä»¶

ESLint è™½ç„¶å¯ä»¥å®šä¹‰å¾ˆå¤šçš„ rulesï¼Œä»¥åŠé€šè¿‡ extends æ¥å¼•å…¥æ›´å¤šçš„è§„åˆ™ï¼Œä½†æ˜¯è¯´åˆ°åº•åªæ˜¯æ£€æŸ¥ JS è¯­æ³•ã€‚å¦‚æœéœ€è¦æ£€æŸ¥ Vue ä¸­çš„ template æˆ–è€… React ä¸­çš„ jsxï¼Œå°±æŸæ‰‹æ— ç­–äº†ã€‚**æ‰€ä»¥å¼•å…¥æ’ä»¶çš„ç›®çš„å°±æ˜¯ä¸ºäº†å¢å¼º ESLint çš„æ£€æŸ¥èƒ½åŠ›å’ŒèŒƒå›´ã€‚**

> åœ¨é…ç½®æ–‡ä»¶é‡Œé…ç½®æ’ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Â pluginsÂ  å…³é”®å­—æ¥å­˜æ”¾æ’ä»¶åå­—çš„åˆ—è¡¨ã€‚æ’ä»¶åç§°å¯ä»¥çœç•¥ Â eslint-plugin-Â  å‰ç¼€ã€‚

```json
{
	"plugins": [
		"vue", // ç­‰ä»·äº"eslint-plugin-vue"
		"@typescript-eslint" // ç­‰ä»·äº@typescript-eslint/eslint-plugin
	]
}
```

## 7. å…¶ä»–é…ç½®

é…ç½®å½“å‰ç›®å½•ä¸º root
ESLint æ£€æµ‹é…ç½®æ–‡ä»¶æ­¥éª¤ï¼š

1. åœ¨è¦æ£€æµ‹çš„æ–‡ä»¶åŒä¸€ç›®å½•é‡Œå¯»æ‰¾ .eslintrc.\* å’Œ package.jsonï¼›
2. ç´§æ¥ç€åœ¨çˆ¶çº§ç›®å½•é‡Œå¯»æ‰¾ï¼Œä¸€ç›´åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ï¼›
3. å¦‚æœåœ¨å‰ä¸¤æ­¥å‘ç°æœ‰ rootï¼štrue çš„é…ç½®ï¼Œåœæ­¢åœ¨çˆ¶çº§ç›®å½•ä¸­å¯»æ‰¾ .eslintrcï¼›
4. å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å›é€€åˆ°ç”¨æˆ·ä¸»ç›®å½• ~/.eslintrc ä¸­è‡ªå®šä¹‰çš„é»˜è®¤é…ç½®ï¼›

é€šå¸¸æˆ‘ä»¬éƒ½ä¹ æƒ¯æŠŠ ESLint é…ç½®æ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œå› æ­¤å¯ä»¥ä¸ºäº†é¿å… ESLint æ ¡éªŒçš„æ—¶å€™å¾€çˆ¶çº§ç›®å½•æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š root: trueã€‚

```json
{
	"root": true
}
```

### ä¸‰ã€ESlint æ ¡éªŒ

ç¬¬äºŒå—é…ç½®å®Œäº†é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯æ€ä¹ˆæ ¡éªŒæ–‡ä»¶å‘¢

æ ¡éªŒ.js ç±»å‹æ–‡ä»¶

```javascript
// æ ¡éªŒ a.js å’Œ b.js
npx eslint a.js b.js
// æ ¡éªŒ src å’Œ scripts ç›®å½•
npx eslint src scripts
```

### æ ¡éªŒå…¶ä»–ç±»å‹æ–‡ä»¶

é€šå¸¸ ESLint åªèƒ½æ ¡éªŒ JS æ–‡ä»¶ã€‚æ¯”å¦‚éœ€è¦æ ¡éªŒ.vue æ–‡ä»¶ï¼Œå…‰é…ç½® vue æ’ä»¶å’Œ vue-eslint-parser è§£æå™¨æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦è®© ESLint åœ¨æŸ¥æ‰¾æ–‡ä»¶çš„æ—¶å€™æ‰¾åˆ°.vue æ–‡ä»¶ã€‚ESLint æä¾›äº†--ext æ¥æŒ‡å®šå…·ä½“éœ€è¦æ ¡éªŒçš„æ–‡ä»¶

```javascript
npx eslint --ext .js,.vue src
```

### è‡ªåŠ¨ä¿®å¤éƒ¨åˆ†æ ¡éªŒé”™è¯¯çš„ä»£ç 

[rules åˆ—è¡¨é¡¹](https://eslint.bootcss.com/docs/rules/) ä¸­æ ‡è¯†äº† ğŸ”§ è§„åˆ™è¡¨ç¤ºè¯¥è§„åˆ™æ˜¯å¯ä»¥è‡ªåŠ¨ä¿®å¤çš„ï¼ŒESLint æä¾›äº†--fix

<center><img style="width:70%;" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bdc0c1088651467c81913a5eef80796e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?">
<span style="color:orange; border-bottom: 1px solid #d9d9d9;display: inline-block;color: #999;padding: 2px;"></span></center>

### package.json é…ç½® scripts

```json
{
	"scripts": {
		"lint": "npx eslint --ext .js,.vue src",
		"lint:fix": "npx eslint --fix --ext .js,.vue src"
	}
}
```

### è¿‡æ»¤ä¸€äº›ä¸éœ€è¦æ ¡éªŒçš„æ–‡ä»¶

å¯¹äºä¸€äº›å…¬å…±çš„ JSã€æµ‹è¯•è„šæœ¬æˆ–è€…æ˜¯ç‰¹å®šç›®å½•ä¸‹çš„æ–‡ä»¶ä¹ æƒ¯ä¸Šæ˜¯ä¸éœ€è¦æ ¡éªŒçš„ï¼Œå› æ­¤å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•é€šè¿‡åˆ›å»ºä¸€ä¸ª.eslintignore æ–‡ä»¶æ¥é…ç½®ï¼Œå‘Šè¯‰ ESLint æ ¡éªŒçš„æ—¶å€™å¿½ç•¥å®ƒä»¬ï¼š

```javascript
public / src / main.js;
```

## å››ã€ä¸ºä»€ä¹ˆè¦ç”¨ ESLint

### 1ã€èƒŒæ™¯ï¼š

æ€»ç»“ä¸ºä¸¤ç‚¹ï¼š

- ä¿æŒä»£ç é£æ ¼ä¸€è‡´ï¼šä¸€åƒä¸ªç¨‹åºå‘˜ï¼Œå°±æœ‰ä¸€åƒç§ä»£ç é£æ ¼ã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæœ‰å‡ ä¸ªè‡³ä»Šè¿˜åœ¨äº‰è®ºçš„ä»£ç é£æ ¼å·®å¼‚ã€‚å¦‚æœä¸€ä¸ªå·¥ç¨‹ä»£ç é£æ ¼ä¸ä¸€æ ·ï¼Œå¯ä»¥æƒ³è±¡éšç€é¡¹ç›®è¿­ä»£æ‰©å¤§ï¼Œç®€ç›´ä¸å¿ç›´è§†

  - å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼Ÿ
  - ä»£ç è¡Œç»“æŸæ˜¯å¦éœ€è¦åˆ†å·ï¼Ÿ
  - ä¸¤ä¸ªç©ºæ ¼è¿˜æ˜¯å››ä¸ªç©ºæ ¼ï¼Ÿ

* å‡å°‘ä»£ç å‡ºé”™å‡ ç‡ï¼šç”±äº JavaScript çš„çµæ´»æ€§ï¼Œå¾€å¾€ä¸€æ®µä»£ç èƒ½æœ‰å¤šç§å†™æ³•ï¼Œè¿™æ—¶å€™ä¹Ÿä¼šå¯¼è‡´ååŒæ—¶å·®å¼‚ã€‚å¹¶ä¸”ï¼Œæœ‰ä¸€äº›å†™æ³•å¯èƒ½ä¼šå¯¼è‡´ä¸æ˜“å‘ç°çš„ bugï¼Œæˆ–è€…è¿™äº›å†™æ³•çš„æ€§èƒ½ä¸å¥½ï¼Œå¼€å‘æ—¶ä¹Ÿåº”è¯¥é¿å…

ä¸ºäº†è§£å†³è¿™ç±»é™æ€ä»£ç é—®é¢˜ï¼Œæ¯ä¸ªå›¢é˜Ÿéƒ½éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„ JavaScript ä»£ç è§„èŒƒï¼Œå›¢é˜Ÿæˆå‘˜éƒ½éµå®ˆè¿™ä»½ä»£ç è§„èŒƒæ¥ç¼–å†™ä»£ç ã€‚å½“ç„¶ï¼Œé äººæ¥ä¿éšœä»£ç è§„èŒƒæ˜¯ä¸å¯é çš„ï¼Œéœ€è¦æœ‰å¯¹åº”çš„å·¥å…·æ¥ä¿éšœï¼ŒESLint å°±æ˜¯è¿™ä¸ªå·¥å…·

### 2ã€ä¸ºä»€ä¹ˆä¸æ˜¯ Prettier

æœ‰çš„è¯»è€…çœ‹åˆ°è¿™é‡Œï¼Œå¯èƒ½ä¼šè¯´ï¼šPrettier ä¹Ÿå¯ä»¥ä¿è¯ä»£ç é£æ ¼ä¸€è‡´ã€‚æ˜¯çš„ Prettier ç¡®å®å¯ä»¥æŒ‰ç…§è®¾ç½®çš„è§„åˆ™å¯¹ä»£ç è¿›è¡Œç»Ÿä¸€æ ¼å¼åŒ–ï¼Œä½†æ˜¯éœ€è¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼ŒPrettier åªä¼šåœ¨æ ¼å¼ä¸Šå¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œä¸€äº›éšè—çš„ä»£ç è´¨é‡é—®é¢˜ Prettier æ˜¯æ— æ³•å‘ç°çš„ï¼Œè€Œ ESLint å¯ä»¥ã€‚

### 3ã€ç›®æ ‡

> å¼€å‘æ—¶æç¤ºï¼Œä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤ï¼Œæäº¤æ—¶æ£€æµ‹

## äº”ã€é¡¹ç›®å®è·µ

### 1ã€vue-cli åˆ›å»ºå·¥ç¨‹

```json
// package.json
 "devDependencies": {
    "@vue/cli-plugin-babel": "~4.5.0",
    "@vue/cli-plugin-eslint": "~4.5.0",
    "babel-eslint": "^10.1.0",
    "eslint": "^6.7.2",
    "eslint-plugin-vue": "^6.2.2",
  },
  "eslintConfig": {
    "root": true,
    "env": {
      "node": true
    },
    "extends": [
      "plugin:vue/essential", // ç­‰ä»·äºç”¨åˆ°eslint-plugin-eslint/essential
      "eslint:recommended",
    ],
    "parserOptions": {
      "parser": "babel-eslint" // è§£æå™¨
    },
    "rules": {}
  },
```

### 2ã€åœ¨ VSCode ä¸­æ”¯æŒ ESLint

å‰é¢åšçš„é…ç½®ï¼Œéƒ½éœ€è¦æ‰§è¡Œå‘½ä»¤æ‰èƒ½è¿›è¡Œæ£€æŸ¥å’Œä¿®å¤ä»£ç ï¼Œè¿˜æ˜¯æŒºä¸æ–¹ä¾¿çš„ï¼Œå¦‚æœæˆ‘å¸Œæœ›ç¼–è¾‘å®Œæˆ–è€…ä¿å­˜æ—¶å»æ£€æŸ¥ä»£ç è¯¥å¦‚ä½•åšå‘¢ï¼Ÿå¯ä»¥ç›´æ¥åœ¨ IDE é‡Œå®‰è£… ESLint æ’ä»¶

- åœ¨ VSCode å·¦ä¸‹è§’æ‰¾åˆ°ä¸€ä¸ªé½¿è½® âš™ å›¾æ ‡ï¼Œç‚¹å‡»åé€‰æ‹©è®¾ç½®é€‰é¡¹ï¼Œè¿™ä¸ªæ—¶å€™æ‰“å¼€äº†è®¾ç½®é¢æ¿ï¼›
- ç„¶ååœ¨ VSCode å³ä¸Šè§’æ‰¾åˆ°æ‰“å¼€è®¾ç½®ï¼ˆjsonï¼‰çš„å›¾æ ‡ï¼Œç‚¹å‡»åï¼Œä¼šæ‰“å¼€ settings.json æ–‡ä»¶ï¼›
- ç„¶åæŠŠä»¥ä¸‹é…ç½®è´´è¿›å»å³å¯ï¼›

```javascript
{
    "eslint.alwaysShowStatus": true,  // æ€»æ˜¯åœ¨ VSCode æ˜¾ç¤º ESLint çš„çŠ¶æ€
    "eslint.quiet": true,             // å¿½ç•¥ warning çš„é”™è¯¯
    "editor.codeActionsOnSave": {     // ä¿å­˜æ—¶ä½¿ç”¨ ESLint ä¿®å¤å¯ä¿®å¤é”™è¯¯
        "source.fixAll": true,
        "source.fixAll.eslint": true
    }
}
```

### 3ã€pre-commit

ä¸¤ä¸ªèƒŒæ™¯

- ä»¥ä¸Šåªæ˜¯é€šè¿‡ ESLint è‡ªåŠ¨ä¿®å¤èƒ½å¤Ÿä¿®å¤çš„é”™è¯¯ä»¥ä»£ç çš„æ ¼å¼åŒ–ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘çš„æ—¶å€™éš¾å…ä¼šé‡åˆ°æ— æ³• fix çš„é”™è¯¯ï¼Œå¯èƒ½å¼€å‘äººå‘˜ä¹Ÿå¿˜è®°ä¿®æ”¹ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æŠŠä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œé‚£å°±æŠŠç³Ÿç³•çš„ä»£ç ç»™æäº¤ä¸Šå»äº†
- ä½¿ç”¨å‘½ä»¤ä¿®å¤çš„æ—¶å€™ï¼Œä¸å°å¿ƒä¿®æ”¹äº†ä»–äººä»£ç ï¼Œå¾ˆå®¹æ˜“é€ æˆå†²çªã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®ä»¥å‰æ²¡æœ‰ç”¨è¿‡ linterï¼Œå¦‚ä½•æœ€æ–¹ä¾¿åœ°å¼€å§‹ä½¿ç”¨å¹¶ä¸”å°½é‡ä¸æ”¹åŠ¨ä¹‹å‰çš„ä»£ç ï¼Ÿ

è§£å†³ä»¥ä¸Šé—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯ï¼Œåœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œè‡ªåŠ¨ä¿®å¤æ ¼å¼é—®é¢˜ï¼Œå¹¶ä¸”åªä¿®å¤è‡ªå·±æ”¹åŠ¨çš„ä»£ç 

å¯ä»¥é€šè¿‡é…ç½® git hooks çš„ pre-commit é’©å­æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚ä¸»è¦æ˜¯åˆ©ç”¨äº† husky å’Œ lint-staged è¿™ 2 ä¸ªåŒ…ã€‚

- huskyï¼šç”¨æ¥é…ç½® git hooks
- lint-stagedï¼šæ‹¿åˆ° staged æ–‡ä»¶è¿›è¡Œå¤„ç†

```json
 "lint-staged": {
    "**/*.{js,vue}":  [
      "eslint --fix",
      "git add"
    ],
    "**/*.{less,css,vue}":  [
      "stylelint --config  ./.stylelintrc --fix",
      "git add"
    ]
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  }
```
å‚è€ƒ

* [zhuanlan.zhihu.com/p/40730212](https://zhuanlan.zhihu.com/p/40730212)
* [juejin.cn/post/697422â€¦](https://juejin.cn/post/6974223481181306888)